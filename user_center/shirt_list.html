<!DOCTYPE doctype html>
<html lang="en">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
    </script>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
            <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
                <!-- Bootstrap CSS -->
                <link crossorigin="anonymous" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" rel="stylesheet">
                    <title>
                        商品-外套
                    </title>
                </link>
            </meta>
        </meta>
        <script>
            function getQueryVariable(variable)
            {
                var query = window.location.search.substring(1);
                var vars = query.split("&");
                for (var i=0;i<vars.length;i++) {
                    var pair = vars[i].split("=");
                    if(pair[0] == variable){return pair[1];}
                }
                return("请登录");
            }
            // 用于控制用户是否登录
            // if (getQueryVariable('uid') == '请登录'){
            //     window.location.href='file:///C:/Users/admin/com-ash-UI/sign_in/tbs_sign_in.html'
            // }

            // 页面加载后就进行post请求
            $(document).ready(function(){
                $.post("http://192.168.64.129:8001/goods_list",JSON.stringify({
                        start:start,
                        count:count,
                        goods_type:2
                    }),
                    function(data,status){
                        data = JSON.parse(data);
                        goods_list = data['original']['goods_list'];
                        for (var i=0;i<goods_list.length;i++) {
                            img=document.getElementById("product_img_" + i);  //查找元素
                            img.innerHTML = "<img " + "src=" + goods_list[i]['product_cover_image'] + "></img>";
                            img.style = "";
                            goods_name = document.getElementById("product_name_" + i);
                            goods_name.innerHTML = goods_list[i]['product_name'];
                            goods_price = document.getElementById("price_" + i);
                            goods_price.innerHTML = "￥" + parseFloat(goods_list[i]['goods_price']/100);
                            goods_id = document.getElementById("gid_" + i);
                            goods_id.innerHTML = goods_list[i]['gid'];
                        }
                });
            });

            var query = window.location.search.substring(1);
            var vars = query.split("&");
            var start = 0;
            var count = 9;
            var uid = "";
            var access_token = "";
            for (var i=0;i<vars.length;i++) {
                var pair = vars[i].split("=");
                if(pair[0] == 'start'){start = pair[1];}
                if(pair[0] == 'count'){count = pair[1];}
                if(pair[0] == 'uid'){uid = pair[1];}
                if(pair[0] == 'access_token'){access_token = pair[1];}
            }

            // 点击上一页
            $(document).ready(function(){
                $("#pre").click(function(){
                    window.event.returnValue=false;
                    if (start <= 9) {
                        var next_start = 0;
                    } else {
                        var next_start=parseInt(start)-9;
                    }
                    window.location.href='file:///C:/Users/admin/com-ash-UI/user_center/coat_list.html?start='+ next_start + "&count=" + count + "&uid=" + uid + "&access_token=" + access_token;
                });
            });
            // 点击下一页
            $(document).ready(function(){
                $("#next").click(function(){
                    window.event.returnValue=false;
                    var next_start=parseInt(start)+9;
                    window.location.href='file:///C:/Users/admin/com-ash-UI/user_center/coat_list.html?start='+ next_start + "&count=" + count + "&uid=" + uid + "&access_token" + access_token;
                });
            });
            // 商品详情
            function goods_info(i){
                gid = document.getElementById('gid_' + i).innerHTML;
                window.event.returnValue=false;
                    window.location.href='file:///C:/Users/admin/com-ash-UI/mall_center/goods_info.html?gid='+ gid + "&uid=" + uid + "&access_token=" + access_token;
            }

            
        </script>
        <style>
            #section1,#section2{
        　　position: relative;
        　　top:-0.96rem;//下移导航的高度（导航固定在顶部）
        　　display: block;
        　　height: 0;
        　　overflow: hidden;
        }
        </style>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script crossorigin="anonymous" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js">
        </script>
        <script crossorigin="anonymous" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js">
        </script>
    </head>
    <body class="bg-warning">
        <div>
            <nav class="navbar navbar-default" role="navigation">
                <a class="navbar-header" href="#">
                    <img alt="Responsive image" src="../Image/A_logo.jpg" style="">
                    </img>
                </a>
                <div style="margin-top: 1%;">
                    <ul class="nav nav-tabs">
                        <li style="margin-left: 3%;">
                            <a class="navbar-brand" href="javascript:location.href='file:///C:/Users/admin/com-ash-UI/user_center/coat_list.html?uid=' + uid + '&access_token=' + access_token">
                                外套
                            </a>
                        </li>
                        <li class="active" style="margin-left: 3%;">
                            <a class="navbar-brand" href="#">
                                上衣
                            </a>
                        </li>
                        <li style="margin-left: 3%;">
                            <a class="navbar-brand" href="javascript:location.href='file:///C:/Users/admin/com-ash-UI/user_center/pants_list.html?uid=' + uid + '&access_token=' + access_token">
                                裤装
                            </a>
                        </li>
                        <li style="margin-left: 3%;">
                            <a class="navbar-brand" href="javascript:location.href='file:///C:/Users/admin/com-ash-UI/user_center/shoes_list.html?uid=' + uid + '&access_token=' + access_token">
                                鞋靴
                            </a>
                        </li>
                        <li style="margin-left: 3%;">
                            <a class="navbar-brand" href="javascript:location.href='file:///C:/Users/admin/com-ash-UI/user_center/accessories_list.html?uid=' + uid + '&access_token=' + access_token">
                                配件
                            </a>
                        </li>
                        <li style="margin-left: 3%;">
                            <a class="navbar-brand" href="javascript:location.href='file:///C:/Users/admin/com-ash-UI/user_center/user_info_center.html?uid=' + uid + '&access_token=' + access_token">
                                个人中心
                            </a>
                        </li>
                        <span class="glyphicon glyphicon-user" style="margin-left: 13%;margin-top: 1.1%;">
                            <a href="#">
                                <script>
                                    document.write(decodeURI(decodeURI((getQueryVariable("uid")))));
                                </script>
                            </a>
                        </span>
                    </ul>
                </div>
            </nav>
        </div>
        <!-- 商品列表展示 每页九个商品-->
        <div style="margin-left : 0%;">
            <div class="row" style="margin : auto;">
                <!-- 外层div -->
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_0" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_0">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_0">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_0">
                        </h3>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_1" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_1">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_1">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_1">
                        </h3>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_2" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_2">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_2">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_2">
                        </h3>
                    </div>
                </div>
            </div>
            <div class="row" style="margin : auto;">
                <!-- 外层div -->
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_3" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_3">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_3">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_3">
                        </h3>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_4" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_4">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_4">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_4">
                        </h3>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_5" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_5">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_5">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_5">
                        </h3>
                    </div>
                </div>
            </div>
            <div class="row" style="margin : auto;">
                <!-- 外层div -->
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_6" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_6">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_6">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_6">
                        </h3>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_7" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_7">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_7">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_7">
                        </h3>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <a class="thumbnail" href="#" id="product_img_8" style="display: none;" onclick="goods_info(this.id.charAt(this.id.length-1))">
                    </a>
                    <div class="text-center">
                        <h3 id="product_name_8">
                        </h3>
                    </div>
                    <div class="text-center">
                        <h3 id="price_8">
                        </h3>
                    </div>
                    <div class="text-center" style="display: none;">
                        <h3 id="gid_8">
                        </h3>
                    </div>
                </div>
            </div>
        </div>
        <div style=" margin-left: 70%;">
            <button class="btn btn-primary" id="pre" style="display: none;" type="button">
                上一页
            </button>
            <button class="btn btn-primary" id="next" type="button">
                下一页
            </button>
        </div>
    </body>
    <script type="text/javascript">
        if (start != 0) {
            pre = document.getElementById('pre');
            pre.style = "";
        }
    </script>
</html>